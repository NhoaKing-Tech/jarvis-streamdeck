<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>ui.render API documentation</title>
<meta name="description" content="Rendering functions for StreamDeck keys.
This module handles the visual appearance of StreamDeck buttons and layout management.">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ui.render</code></h1>
</header>
<section id="section-intro">
<p>Rendering functions for StreamDeck keys.
This module handles the visual appearance of StreamDeck buttons and layout management.</p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="ui.render.create_layouts"><code class="name flex">
<span>def <span class="ident">create_layouts</span></span>(<span>deck)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_layouts(deck):
    &#34;&#34;&#34;Create all layout definitions for the StreamDeck interface.

    This function generates all layout configurations used by the jarvis application.
    Each layout defines the complete key mapping for a specific mode or context
    (main, git tools, conda commands, etc.).

    Args:
        deck: StreamDeck device object (needed for some dynamic key functions)

    Returns:
        dict: Dictionary mapping layout names to layout configurations

    Layout Structure:
        Each layout maps key positions (0-31) to configuration dictionaries:
        ```
        {
            &#34;main&#34;: {
                0: {&#34;icon&#34;: &#34;project1.png&#34;, &#34;action&#34;: open_vscode(&#34;/path&#34;)},
                1: {&#34;label&#34;: &#34;Terminal&#34;, &#34;action&#34;: hk_terminal},
                ...
            },
            &#34;git_layout&#34;: {
                0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)},
                ...
            }
        }
        ```

    Available Layouts:
        - **main**: Primary interface with projects, tools, and navigation
        - **apps**: Application launchers (Spotify, YouTube, etc.)
        - **git_layout**: Git operations and code snippets
        - **python_layout**: Python development tools
        - **conda_layout**: Conda environment management commands
        - **terminal_layout**: Terminal and command-line tools
        - Language-specific layouts: html_layout, css_layout, javascript_layout

    Dynamic Elements:
        Some layouts include dynamic elements that depend on configuration:
        - Project paths from PROJECTS_DIR
        - Obsidian vault paths from OBSIDIAN_VAULTS
        - User-specific directories and tools

    Raises:
        RuntimeError: If render module not initialized with required paths
    &#34;&#34;&#34;
    # Import here to avoid circular imports
    from .logic import switch_layout

    if PROJECTS_DIR is None:
        raise RuntimeError(&#34;Render module not initialized with required paths. Call initialize_render() first.&#34;)
    if OBSIDIAN_VAULTS is None:
        raise RuntimeError(&#34;Render module not initialized with required paths. Call initialize_render() first.&#34;)

    # Ensure PROJECTS_DIR is a Path object for safe operations
    from pathlib import Path
    projects_path = PROJECTS_DIR if hasattr(PROJECTS_DIR, &#39;__truediv__&#39;) else Path(PROJECTS_DIR)

    # 0,     1,    2,   3,     4,    5,    6,    7
    # 8,     9,   10,   11,   12,   13,   14,   15
    # 16,   17,   18,   19,   20,   21,   22,   23
    # 24,   25,   26,   27,   28,   29,   30,   31

    layouts = {}

    layouts[&#34;main&#34;] = {
        0: {&#34;icon&#34;: &#34;project1.png&#34;, &#34;action&#34;: actions.open_vscode(str(projects_path / &#39;jarvis-streamdeck&#39;))},
        1: {&#34;icon&#34;: &#34;project2.png&#34;, &#34;action&#34;: actions.open_vscode(str(projects_path / &#39;busybee&#39;))},
        2: {&#34;icon&#34;: &#34;project3.png&#34;, &#34;action&#34;: actions.open_vscode(str(projects_path / &#39;pandora&#39;))},
        3: {&#34;icon&#34;: &#34;project4.png&#34;, &#34;action&#34;: actions.open_vscode(str(projects_path / &#39;nhoaking_website&#39;))},
        4: {&#34;icon&#34;: &#34;commit.png&#34;, &#34;action&#34;: actions.defaultbranch_commit},
        5: {&#34;icon&#34;: &#34;git_layout.png&#34;, &#34;action&#34;: switch_layout(&#34;git_layout&#34;)},
        6: {&#34;icon&#34;: &#34;github.png&#34;, &#34;action&#34;: actions.url_github},
        7: {&#34;icon&#34;: &#34;busybee_layout.png&#34;, &#34;color&#34;: &#34;#fdff8a&#34;, &#34;action&#34;: switch_layout(&#34;busybee_layout&#34;)},
        8: {&#34;icon&#34;: &#34;quartz.png&#34;, &#34;action&#34;: actions.open_obsidian(OBSIDIAN_VAULTS.get(&#39;quartz&#39;, &#39;&#39;))},
        12: {&#34;icon&#34;: &#34;journal.png&#34;, &#34;action&#34;: actions.open_obsidian(OBSIDIAN_VAULTS.get(&#39;journal&#39;, &#39;&#39;))},
        13: {&#34;label&#34;: &#34;Zenith&#34;, &#34;icon&#34;: &#34;nautilus.png&#34;, &#34;action&#34;: lambda: actions.nautilus_path(str(projects_path))},
        14: {&#34;label&#34;: &#34;Busybee&#34;, &#34;icon&#34;: &#34;nautilus.png&#34;, &#34;action&#34;: lambda: actions.nautilus_path(str(projects_path / &#39;busybee&#39;))},
        15: {&#34;icon&#34;: &#34;terminal_default.png&#34;, &#34;action&#34;: actions.hk_terminal},
        16: {&#34;icon&#34;: &#34;terminal_jarvisbusybee.png&#34;, &#34;action&#34;: actions.terminal_env_jarvis},
        17: {&#34;icon&#34;: &#34;terminal_busybee.png&#34;, &#34;action&#34;: actions.terminal_env_busybee},
        18: {&#34;icon&#34;: &#34;terminal_pandora.png&#34;, &#34;action&#34;: actions.terminal_env_jarvis},
        19: {&#34;icon&#34;: &#34;terminal_website.png&#34;, &#34;action&#34;: actions.terminal_env_jarvis},
        20: {&#34;icon&#34;: &#34;freecodecamp.png&#34;, &#34;action&#34;: actions.url_freecodecamp},
        21: {&#34;icon&#34;: &#34;claude.png&#34;, &#34;action&#34;: actions.url_claude},
        22: {&#34;icon&#34;: &#34;chatgpt.png&#34;, &#34;action&#34;: actions.url_chatgpt},
        23: {&#34;icon&#34;: &#34;key.png&#34;, &#34;action&#34;: actions.type_keyring()},
        24: {&#34;icon&#34;: &#34;python_layout.png&#34;, &#34;action&#34;: switch_layout(&#34;python_layout&#34;)},
        25: {&#34;icon&#34;: &#34;html_layout.png&#34;, &#34;action&#34;: switch_layout(&#34;html_layout&#34;)},
        26: {&#34;icon&#34;: &#34;css_layout.png&#34;, &#34;action&#34;: switch_layout(&#34;css_layout&#34;)},
        27: {&#34;icon&#34;: &#34;javascript_layout.png&#34;, &#34;action&#34;: switch_layout(&#34;javascript_layout&#34;)},
        28: {&#34;icon&#34;: &#34;conda_layout.png&#34;, &#34;action&#34;: switch_layout(&#34;conda_layout&#34;)},
        29: {&#34;icon&#34;: &#34;terminal_layout.png&#34;, &#34;action&#34;: switch_layout(&#34;terminal_layout&#34;)},
        30: {&#34;icon&#34;: &#34;apps_layout.png&#34;, &#34;action&#34;: switch_layout(&#34;apps&#34;)},
        31: {&#34;icon&#34;: &#34;mic-fill.png&#34;, &#34;action&#34;: actions.toggle_mic(deck, 31)},
    }


    # Terminal layout
    layouts[&#34;apps&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)}, #&lt;div&gt; Icons made by &lt;a href=&#34;https://www.flaticon.com/authors/radhe-icon&#34; title=&#34;Radhe Icon&#34;&gt; Radhe Icon &lt;/a&gt; from &lt;a href=&#34;https://www.flaticon.com/&#34; title=&#34;Flaticon&#34;&gt;www.flaticon.com&#39;&lt;/a&gt;&lt;/div&gt;
    1: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: actions.spotify},
    2: {&#34;icon&#34;: &#34;youtube.png&#34;, &#34;action&#34;: actions.url_youtube},    
}
    layouts[&#34;git_layout&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)}, #&lt;div&gt; Icons made by &lt;a href=&#34;https://www.flaticon.com/authors/radhe-icon&#34; title=&#34;Radhe Icon&#34;&gt; Radhe Icon &lt;/a&gt; from &lt;a href=&#34;https://www.flaticon.com/&#34; title=&#34;Flaticon&#34;&gt;www.flaticon.com&#39;&lt;/a&gt;&lt;/div&gt;
    1: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: actions.spotify},
    2: {&#34;label&#34;: &#34;Simple Snippet&#34;, &#34;color&#34;: &#34;cyan&#34;, &#34;action&#34;: actions.type_snippet(&#34;hello&#34;)},
    3: {&#34;label&#34;: &#34;Python Boilerplate&#34;, &#34;color&#34;: &#34;orange&#34;, &#34;action&#34;: actions.type_snippet(&#34;python_boilerplate&#34;)},
}
    layouts[&#34;busybee_layout&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)}, #&lt;div&gt; Icons made by &lt;a href=&#34;https://www.flaticon.com/authors/radhe-icon&#34; title=&#34;Radhe Icon&#34;&gt; Radhe Icon &lt;/a&gt; from &lt;a href=&#34;https://www.flaticon.com/&#34; title=&#34;Flaticon&#34;&gt;www.flaticon.com&#39;&lt;/a&gt;&lt;/div&gt;
    1: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: actions.spotify},
    2: {&#34;label&#34;: &#34;Simple Snippet&#34;, &#34;color&#34;: &#34;cyan&#34;, &#34;action&#34;: actions.type_snippet(&#34;hello&#34;)},
    3: {&#34;label&#34;: &#34;Python Boilerplate&#34;, &#34;color&#34;: &#34;orange&#34;, &#34;action&#34;: actions.type_snippet(&#34;python_boilerplate&#34;)},
}
    layouts[&#34;python_layout&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)}, #&lt;div&gt; Icons made by &lt;a href=&#34;https://www.flaticon.com/authors/radhe-icon&#34; title=&#34;Radhe Icon&#34;&gt; Radhe Icon &lt;/a&gt; from &lt;a href=&#34;https://www.flaticon.com/&#34; title=&#34;Flaticon&#34;&gt;www.flaticon.com&#39;&lt;/a&gt;&lt;/div&gt;
    1: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: actions.spotify},
    2: {&#34;label&#34;: &#34;Simple Snippet&#34;, &#34;color&#34;: &#34;cyan&#34;, &#34;action&#34;: actions.type_snippet(&#34;hello&#34;)},
    3: {&#34;label&#34;: &#34;Python Boilerplate&#34;, &#34;color&#34;: &#34;orange&#34;, &#34;action&#34;: actions.type_snippet(&#34;python_boilerplate&#34;)},
}
    layouts[&#34;html_layout&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)}, #&lt;div&gt; Icons made by &lt;a href=&#34;https://www.flaticon.com/authors/radhe-icon&#34; title=&#34;Radhe Icon&#34;&gt; Radhe Icon &lt;/a&gt; from &lt;a href=&#34;https://www.flaticon.com/&#34; title=&#34;Flaticon&#34;&gt;www.flaticon.com&#39;&lt;/a&gt;&lt;/div&gt;
    1: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: actions.spotify},
    2: {&#34;label&#34;: &#34;Simple Snippet&#34;, &#34;color&#34;: &#34;cyan&#34;, &#34;action&#34;: actions.type_snippet(&#34;hello&#34;)},
    3: {&#34;label&#34;: &#34;Python Boilerplate&#34;, &#34;color&#34;: &#34;orange&#34;, &#34;action&#34;: actions.type_snippet(&#34;python_boilerplate&#34;)},
}
    layouts[&#34;css_layout&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)}, #&lt;div&gt; Icons made by &lt;a href=&#34;https://www.flaticon.com/authors/radhe-icon&#34; title=&#34;Radhe Icon&#34;&gt; Radhe Icon &lt;/a&gt; from &lt;a href=&#34;https://www.flaticon.com/&#34; title=&#34;Flaticon&#34;&gt;www.flaticon.com&#39;&lt;/a&gt;&lt;/div&gt;
    1: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: actions.spotify},
    2: {&#34;label&#34;: &#34;Simple Snippet&#34;, &#34;color&#34;: &#34;cyan&#34;, &#34;action&#34;: actions.type_snippet(&#34;hello&#34;)},
    3: {&#34;label&#34;: &#34;Python Boilerplate&#34;, &#34;color&#34;: &#34;orange&#34;, &#34;action&#34;: actions.type_snippet(&#34;python_boilerplate&#34;)},
}
    layouts[&#34;javascript_layout&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)}, #&lt;div&gt; Icons made by &lt;a href=&#34;https://www.flaticon.com/authors/radhe-icon&#34; title=&#34;Radhe Icon&#34;&gt; Radhe Icon &lt;/a&gt; from &lt;a href=&#34;https://www.flaticon.com/&#34; title=&#34;Flaticon&#34;&gt;www.flaticon.com&#39;&lt;/a&gt;&lt;/div&gt;
    1: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: actions.spotify},
    2: {&#34;label&#34;: &#34;Simple Snippet&#34;, &#34;color&#34;: &#34;cyan&#34;, &#34;action&#34;: actions.type_snippet(&#34;hello&#34;)},
    3: {&#34;label&#34;: &#34;Python Boilerplate&#34;, &#34;color&#34;: &#34;orange&#34;, &#34;action&#34;: actions.type_snippet(&#34;python_boilerplate&#34;)},
}
    layouts[&#34;conda_layout&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)},
    1: {&#34;label&#34;: &#34;List envs&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda env list\n&#34;)},
    2: {&#34;label&#34;: &#34;Conda activate &lt;env&gt;&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda activate &lt;env&gt;&#34;)},
    3: {&#34;label&#34;: &#34;Conda deactivate &lt;env&gt;&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda deactivate\n&#34;)},
    4: {&#34;label&#34;: &#34;List installed ALL packages&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda list\n&#34;)},
    5: {&#34;label&#34;: &#34;List install package&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda list &lt;package&gt;&#34;)},
    6: {&#34;label&#34;: &#34;Python version&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;python --version\n&#34;)},
    7: {&#34;label&#34;: &#34;Activate env&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda activate &lt;env&gt;&#34;)},
    8: {&#34;label&#34;: &#34;Create new env&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda create -n &lt;newenv&gt; python=3.11.13&#34;)},
    9: {&#34;label&#34;: &#34;Conda install&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda install &#34;)},
    10: {&#34;label&#34;: &#34;Conda install conda-forge&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda install -c conda-forge &#34;)},
    11: {&#34;label&#34;: &#34;Pip install&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;pip install &#34;)},
    12: {&#34;label&#34;: &#34;Export env&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda env export &gt; environment.yml\n&#34;)},
    13: {&#34;label&#34;: &#34;Recreate env&#34;, &#34;color&#34;: &#34;#1c2e1c&#34;, &#34;action&#34;: actions.type_text(&#34;conda env create -f environment.yml\n&#34;)},
}
    layouts[&#34;terminal_layout&#34;] = {
    0: {&#34;icon&#34;: &#34;back.png&#34;, &#34;color&#34;: &#34;white&#34;, &#34;action&#34;: switch_layout(&#34;main&#34;)}, #&lt;div&gt; Icons made by &lt;a href=&#34;https://www.flaticon.com/authors/radhe-icon&#34; title=&#34;Radhe Icon&#34;&gt; Radhe Icon &lt;/a&gt; from &lt;a href=&#34;https://www.flaticon.com/&#34; title=&#34;Flaticon&#34;&gt;www.flaticon.com&#39;&lt;/a&gt;&lt;/div&gt;
    1: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: actions.spotify},
    2: {&#34;label&#34;: &#34;Simple Snippet&#34;, &#34;color&#34;: &#34;cyan&#34;, &#34;action&#34;: actions.type_snippet(&#34;hello&#34;)},
    3: {&#34;label&#34;: &#34;Python Boilerplate&#34;, &#34;color&#34;: &#34;orange&#34;, &#34;action&#34;: actions.type_snippet(&#34;python_boilerplate&#34;)},
}

    return layouts</code></pre>
</details>
<div class="desc"><p>Create all layout definitions for the StreamDeck interface.</p>
<p>This function generates all layout configurations used by the jarvis application.
Each layout defines the complete key mapping for a specific mode or context
(main, git tools, conda commands, etc.).</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>deck</code></strong></dt>
<dd>StreamDeck device object (needed for some dynamic key functions)</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Dictionary mapping layout names to layout configurations</dd>
</dl>
<p>Layout Structure:
Each layout maps key positions (0-31) to configuration dictionaries:
<code>{
"main": {
0: {"icon": "project1.png", "action": open_vscode("/path")},
1: {"label": "Terminal", "action": hk_terminal},
...
},
"git_layout": {
0: {"icon": "back.png", "action": switch_layout("main")},
...
}
}</code></p>
<p>Available Layouts:
- <strong>main</strong>: Primary interface with projects, tools, and navigation
- <strong>apps</strong>: Application launchers (Spotify, YouTube, etc.)
- <strong>git_layout</strong>: Git operations and code snippets
- <strong>python_layout</strong>: Python development tools
- <strong>conda_layout</strong>: Conda environment management commands
- <strong>terminal_layout</strong>: Terminal and command-line tools
- Language-specific layouts: html_layout, css_layout, javascript_layout</p>
<p>Dynamic Elements:
Some layouts include dynamic elements that depend on configuration:
- Project paths from PROJECTS_DIR
- Obsidian vault paths from OBSIDIAN_VAULTS
- User-specific directories and tools</p>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>RuntimeError</code></dt>
<dd>If render module not initialized with required paths</dd>
</dl></div>
</dd>
<dt id="ui.render.initialize_render"><code class="name flex">
<span>def <span class="ident">initialize_render</span></span>(<span>font_dir,<br>icons_dir,<br>user_home=None,<br>projects_dir=None,<br>obsidian_vaults=None,<br>keyring_pw=None)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def initialize_render(font_dir, icons_dir, user_home=None, projects_dir=None, obsidian_vaults=None, keyring_pw=None):
    &#34;&#34;&#34;Initialize the render module with required directories and paths.

    This function sets up the global configuration variables needed by the render
    module to create layouts and render StreamDeck keys. It implements dependency
    injection to keep configuration centralized.

    Args:
        font_dir (str): Path to font file for text rendering on keys
        icons_dir (str): Directory containing icon files for StreamDeck keys
        user_home (Path, optional): User&#39;s home directory path
        projects_dir (Path, optional): User&#39;s main projects directory
        obsidian_vaults (dict, optional): Dictionary mapping vault names to paths
        keyring_pw (str, optional): Password for keyring access

    Note:
        This function must be called before any render functions are used,
        typically during application startup.
    &#34;&#34;&#34;
    global FONT_DIR, ICONS_DIR, USER_HOME, PROJECTS_DIR, OBSIDIAN_VAULTS
    FONT_DIR = font_dir
    ICONS_DIR = icons_dir
    USER_HOME = user_home
    PROJECTS_DIR = projects_dir
    OBSIDIAN_VAULTS = obsidian_vaults or {}
    KEYRING_PW = keyring_pw</code></pre>
</details>
<div class="desc"><p>Initialize the render module with required directories and paths.</p>
<p>This function sets up the global configuration variables needed by the render
module to create layouts and render StreamDeck keys. It implements dependency
injection to keep configuration centralized.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>font_dir</code></strong> :&ensp;<code>str</code></dt>
<dd>Path to font file for text rendering on keys</dd>
<dt><strong><code>icons_dir</code></strong> :&ensp;<code>str</code></dt>
<dd>Directory containing icon files for StreamDeck keys</dd>
<dt><strong><code>user_home</code></strong> :&ensp;<code>Path</code>, optional</dt>
<dd>User's home directory path</dd>
<dt><strong><code>projects_dir</code></strong> :&ensp;<code>Path</code>, optional</dt>
<dd>User's main projects directory</dd>
<dt><strong><code>obsidian_vaults</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>Dictionary mapping vault names to paths</dd>
<dt><strong><code>keyring_pw</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Password for keyring access</dd>
</dl>
<h2 id="note">Note</h2>
<p>This function must be called before any render functions are used,
typically during application startup.</p></div>
</dd>
<dt id="ui.render.render_keys"><code class="name flex">
<span>def <span class="ident">render_keys</span></span>(<span>deck, key, label=None, icon=None, color='black', labelcolor='white')</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def render_keys(deck, key, label=None, icon=None, color=&#34;black&#34;, labelcolor=&#34;white&#34;):
    &#34;&#34;&#34;Render the visual appearance of a StreamDeck key with icon and/or text.

    This function handles the visual rendering of StreamDeck buttons, supporting
    multiple display modes: icon only, text only, icon with text, or solid color.
    It automatically handles text wrapping, icon scaling, and layout positioning.

    Args:
        deck: StreamDeck device object
        key (int): Key index (0-31 for StreamDeck XL)
        label (str, optional): Text to display on the key
        icon (str, optional): Filename of icon to display (must be in ICONS_DIR)
        color (str): Background color when no icon used. Defaults to &#34;black&#34;
        labelcolor (str): Text color for labels. Defaults to &#34;white&#34;

    Display Modes:
        1. **Icon and label**: Icon at top, label at bottom (truncated if too long)
        2. **Only label**: Centered text, wrapped to multiple lines if needed
        3. **Only icon**: Maximized icon space with minimal margins
        4. **Neither**: Solid color background (red if color not specified, indicates error)

    Text Handling:
        - Automatically calculates character width for proper text wrapping
        - Truncates long labels with &#34;...&#34; when combined with icons
        - Centers text both horizontally and vertically
        - Uses custom font with fallback to system default

    Icon Handling:
        - Scales icons to fit key dimensions with appropriate margins
        - Handles missing icon files gracefully with fallback colors
        - Supports PNG format icons optimized for 96x96 pixel keys

    Raises:
        RuntimeError: If render module not initialized
    &#34;&#34;&#34;

    if FONT_DIR is None or ICONS_DIR is None:
        raise RuntimeError(&#34;Render module not initialized. Call initialize_render() first.&#34;)

    # I load my custom font, with fallback to system default if it fails
    try:
        font = ImageFont.truetype(FONT_DIR, 16) # I am using 16 for my 96x96 keys.
    except OSError:
        print(&#34;Could not load your custom font, check the font path and the font format (it must be .ttf).&#34;)
        font = ImageFont.load_default()

    # Case 1: Both icon and label
    if label and icon:
        icon_path = os.path.join(ICONS_DIR, icon)
        if os.path.exists(icon_path):
            icon_img = Image.open(icon_path)
            # Give more bottom margin for text space
            key_image = PILHelper.create_scaled_key_image(deck, icon_img, margins=(10, 0, 30, 0), background=color) #use the specified background color, or black by default if not specified
        else:
            # Icon file not found, fallback to red background for debugging
            print(f&#34;Warning: icon {icon_path} not found, falling back to color red&#34;)
            key_image = PILHelper.create_key_image(deck, background=&#34;red&#34;)

        # Draw the icon with the margins as specified above to allow text/label space
        draw = ImageDraw.Draw(key_image)

        # To include a clean label, I calculate how many characters fit in one line
        sample_bbox = font.getbbox(&#34;a&#34;)
        avg_char_width = sample_bbox[2] - sample_bbox[0]
        chars_per_line = max(1, int(key_image.width // avg_char_width))

        # Truncate text if too long for one liner
        if len(label) &gt; chars_per_line:
            display_text = label[:chars_per_line-3] + &#34;...&#34;
        else:
            display_text = label

        # Position text at bottom center
        text_y = key_image.height - 20  # 20 pixels from bottom. Where the text starts.
        draw.text(
            (key_image.width // 2, text_y),
            text=display_text,
            font=font,
            anchor=&#34;mt&#34;,  # middle-top. It positions the top of the text at the calculated.
            # The anchor point defines which part of the text gets positioned at the coordinates specified. Since text_y is calculated as 20 pixels from the bottom, we want the top of the text to be positioned at that point, so the text extends downward from there.
            fill=labelcolor # white text color per default (can be changed if needed)
        )

    # Case 2: Only label (no icon)
    elif label:
        key_image = PILHelper.create_key_image(deck, background=color) # from the PILHelper.py from the original repo
        draw = ImageDraw.Draw(key_image)

        # This is used to estimate character width for text wrapping. Not very important to be super accurate, since the text will be wrapped anyway.
        sample_bbox = font.getbbox(&#34;a&#34;) # To measure font metrics. Get average character width
        # getbbox() returns a bounding box (rectangle coordinates) that would completely contain the given text when rendered. The return value is a tuple: (left, top, right, bottom) in pixels.
        avg_char_width = sample_bbox[2] - sample_bbox[0]
        chars_per_line = max(1, int(key_image.width // avg_char_width))

        # Wrap text to multiple lines
        wrapped_lines = textwrap.wrap(label, width=chars_per_line)

        # This is used to estimate character height for vertical centering
        line_bbox = font.getbbox(&#34;Ay&#34;)
        #Why &#34;Ay&#34; specifically:
        # This is a smart choice of characters to measure:
        #&#34;A&#34; - A tall uppercase letter that reaches the full height (ascender)
        #&#34;y&#34; - A lowercase letter with a descender (the part that hangs below the baseline)
        #Together, &#34;Ay&#34; gives you the maximum possible height any normal text could have in that font - from the top of tall letters to the bottom of letters with tails.
        ## If getbbox(&#34;Ay&#34;) returns (0, -2, 15, 18), then:
        #left = 0    # leftmost pixel of the text
        #top = -2    # topmost pixel (negative because it&#39;s above baseline)
        #right = 15  # rightmost pixel
        #bottom = 18 # bottommost pixel (includes descender for &#39;y&#39;)
        line_height = line_bbox[3] - line_bbox[1]
        total_text_height = len(wrapped_lines) * line_height

        # Center text vertically
        start_y = (key_image.height - total_text_height) // 2

        # Draw each line
        for i, line in enumerate(wrapped_lines):
            y_pos = start_y + (i * line_height)
            # anchor=&#34;mt&#34;: position the top of each text line at y_pos
            # This ensures consistent line spacing as each line flows downward
            draw.text(
                (key_image.width // 2, y_pos),  # x=center, y=calculated position
                text=line,
                font=font,
                anchor=&#34;mt&#34;,  # middle-top: center horizontally, position top edge at y coordinate
                fill=labelcolor # white text color per default (can be changed if needed)
            )

    # Case 3: Only icon (no label)
    elif icon:
        icon_path = os.path.join(ICONS_DIR, icon)
        if os.path.exists(icon_path):
            icon_img = Image.open(icon_path)
            # No margins needed, maximize icon space
            key_image = PILHelper.create_scaled_key_image(deck, icon_img, margins=(5, 5, 5, 5), background=color)
        else:
            print(f&#34;Warning: icon {icon_path} not found, falling back to color red&#34;)
            key_image = PILHelper.create_key_image(deck, background=&#34;red&#34;)

    # Case 4: Neither icon nor label, just color. Default to red to indicate a problem, signaling that nothing has been set for this key.
    else:
        key_image = PILHelper.create_key_image(deck, background=color if color else &#34;red&#34;)

    # Set the key image on the deck
    deck.set_key_image(key, PILHelper.to_native_key_format(deck, key_image)) # set_key_image comes from StreamDeck.py from the original repo
    # to_native_key_format comes from PILHelper.py from the original repo</code></pre>
</details>
<div class="desc"><p>Render the visual appearance of a StreamDeck key with icon and/or text.</p>
<p>This function handles the visual rendering of StreamDeck buttons, supporting
multiple display modes: icon only, text only, icon with text, or solid color.
It automatically handles text wrapping, icon scaling, and layout positioning.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>deck</code></strong></dt>
<dd>StreamDeck device object</dd>
<dt><strong><code>key</code></strong> :&ensp;<code>int</code></dt>
<dd>Key index (0-31 for StreamDeck XL)</dd>
<dt><strong><code>label</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Text to display on the key</dd>
<dt><strong><code>icon</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>Filename of icon to display (must be in ICONS_DIR)</dd>
<dt><strong><code>color</code></strong> :&ensp;<code>str</code></dt>
<dd>Background color when no icon used. Defaults to "black"</dd>
<dt><strong><code>labelcolor</code></strong> :&ensp;<code>str</code></dt>
<dd>Text color for labels. Defaults to "white"</dd>
</dl>
<p>Display Modes:
1. <strong>Icon and label</strong>: Icon at top, label at bottom (truncated if too long)
2. <strong>Only label</strong>: Centered text, wrapped to multiple lines if needed
3. <strong>Only icon</strong>: Maximized icon space with minimal margins
4. <strong>Neither</strong>: Solid color background (red if color not specified, indicates error)</p>
<p>Text Handling:
- Automatically calculates character width for proper text wrapping
- Truncates long labels with "&hellip;" when combined with icons
- Centers text both horizontally and vertically
- Uses custom font with fallback to system default</p>
<p>Icon Handling:
- Scales icons to fit key dimensions with appropriate margins
- Handles missing icon files gracefully with fallback colors
- Supports PNG format icons optimized for 96x96 pixel keys</p>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>RuntimeError</code></dt>
<dd>If render module not initialized</dd>
</dl></div>
</dd>
<dt id="ui.render.render_layout"><code class="name flex">
<span>def <span class="ident">render_layout</span></span>(<span>deck, layout)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def render_layout(deck, layout):
    &#34;&#34;&#34;Render all keys for the given layout configuration.

    This function updates the entire StreamDeck display by rendering each key
    according to its configuration in the provided layout dictionary. It first
    clears the existing display, then renders each configured key.

    Args:
        deck: StreamDeck device object
        layout (dict): Layout dictionary mapping key numbers to configurations

    Layout Structure:
        The layout dictionary maps key numbers (0-31) to configuration dictionaries:
        ```
        {
            0: {&#34;icon&#34;: &#34;spotify.png&#34;, &#34;action&#34;: some_function},
            1: {&#34;label&#34;: &#34;Terminal&#34;, &#34;color&#34;: &#34;blue&#34;, &#34;action&#34;: another_function},
            ...
        }
        ```

    Process:
        1. Validates deck is open and available
        2. Resets/clears all existing key displays
        3. Sets brightness to 100%
        4. Renders each key according to its configuration

    Configuration Keys:
        - **label**: Text to display on the key
        - **icon**: Icon filename (from ICONS_DIR)
        - **color**: Background color
        - **labelcolor**: Text color
        - **action**: Function to call when key is pressed (not used in rendering)

    Note:
        Only renders visual elements. Key actions are handled by the logic module.
    &#34;&#34;&#34;
    if not deck or not deck.is_open(): # exits if deck is not initialized before the loop to render keys
        return
    deck.reset()  # clear old icons
    deck.set_brightness(100) # set brightness to 50% (0-100) # from StreamDeck.py from the original repo
    for key, config in layout.items():
        # This loop is a dictionary unpacking
        # config is label, icon, color, labelcolor, action...
        # The layout.items() method returns pairs (tuples) of
        # (key, configs) for each item in the dictionary. Python
        # unpacks each tuple into two variables: key and its configuration.
        render_keys(
            deck,
            key,
            config.get(&#34;label&#34;), # text label to display on the key (if specified)
            config.get(&#34;icon&#34;), # icon filename to display on the key (if specified)
            config.get(&#34;color&#34;), # the background color of the key (if specified)
            config.get(&#34;labelcolor&#34;) # the color of the text label (if specified)
        )</code></pre>
</details>
<div class="desc"><p>Render all keys for the given layout configuration.</p>
<p>This function updates the entire StreamDeck display by rendering each key
according to its configuration in the provided layout dictionary. It first
clears the existing display, then renders each configured key.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>deck</code></strong></dt>
<dd>StreamDeck device object</dd>
<dt><strong><code>layout</code></strong> :&ensp;<code>dict</code></dt>
<dd>Layout dictionary mapping key numbers to configurations</dd>
</dl>
<p>Layout Structure:
The layout dictionary maps key numbers (0-31) to configuration dictionaries:
<code>{
0: {"icon": "spotify.png", "action": some_function},
1: {"label": "Terminal", "color": "blue", "action": another_function},
...
}</code></p>
<h2 id="process">Process</h2>
<ol>
<li>Validates deck is open and available</li>
<li>Resets/clears all existing key displays</li>
<li>Sets brightness to 100%</li>
<li>Renders each key according to its configuration</li>
</ol>
<p>Configuration Keys:
- <strong>label</strong>: Text to display on the key
- <strong>icon</strong>: Icon filename (from ICONS_DIR)
- <strong>color</strong>: Background color
- <strong>labelcolor</strong>: Text color
- <strong>action</strong>: Function to call when key is pressed (not used in rendering)</p>
<h2 id="note">Note</h2>
<p>Only renders visual elements. Key actions are handled by the logic module.</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="ui" href="index.html">ui</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="ui.render.create_layouts" href="#ui.render.create_layouts">create_layouts</a></code></li>
<li><code><a title="ui.render.initialize_render" href="#ui.render.initialize_render">initialize_render</a></code></li>
<li><code><a title="ui.render.render_keys" href="#ui.render.render_keys">render_keys</a></code></li>
<li><code><a title="ui.render.render_layout" href="#ui.render.render_layout">render_layout</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
